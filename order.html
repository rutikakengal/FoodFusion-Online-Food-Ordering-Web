<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirm Your Order - Food Fusion</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="./img/logo.svg" type="image/x-icon">
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="css/font-awesome/css/font-awesome.css">
    <!-- Hover CSS -->
    <link rel="stylesheet" href="css/hover-min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Order CSS  -->
    <link rel="stylesheet" href="css/order.css">

</head>

<body>
    <!-- Navigation Section Start -->
    <header class="navbar">
        <nav id="site-top-nav" class="navbar-menu navbar-fixed-top">
            <div class="container">
                <div class="logo">
                    <a href="index.html" title="Logo">
                        <img src="img/logo.svg" alt="Logo" class="img-responsive">
                    </a>
                </div>
                <div class="menu text-right">
                    <ul>
                        <li><a class="hvr-underline-from-center" href="index.html">Home</a></li>
                        <li><a class="hvr-underline-from-center" href="categories.html">Categories</a></li>
                        <li><a class="hvr-underline-from-center" href="foods.html">Foods</a></li>
                        <li><a class="hvr-underline-from-center" href="order.html">Order</a></li>
                        <li><a class="hvr-underline-from-center" href="contact.html">Contact</a></li>
                        <li><a class="hvr-underline-from-center" href="login.html">Login</a></li>
                        <li><a class="hvr-underline-from-center" href="profile.html" title="Sign-in"><i
                                    class="fa fa-user"></i> Signup</a></li>
                        <li>
                            <a id="shopping-cart" class="shopping-cart">
                                <i class="fa fa-cart-arrow-down"></i>
                                <span class="badge">0</span>
                            </a>
                            <div id="cart-content" class="cart-content">
                                <h3 class="text-center">Shopping Cart</h3>
                                <table class="cart-table" border="0">
                                    <tr>
                                        <th>Food</th>
                                        <th>Name</th>
                                        <th>Price</th>
                                        <th>Qty</th>
                                        <th>Total</th>
                                        <th>Action</th>
                                    </tr>
                                    <tr>
                                        <th colspan="4">Total</th>
                                        <th>$0.00</th>
                                        <th></th>
                                    </tr>
                                </table>
                                <a href="order.html" class="btn-primary">Confirm Order</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <!-- Navigation Section End -->

    <!-- Order Section Start -->
    <section class="order">
        <div class="order__particles">
            <div class="order__particle" style="left: 10%; animation-delay: 0s;">üçï</div>
            <div class="order__particle" style="left: 30%; animation-delay: 2s;">üçî</div>
            <div class="order__particle" style="left: 50%; animation-delay: 4s;">ü•™</div>
            <div class="order__particle" style="left: 70%; animation-delay: 6s;">üçü</div>
            <div class="order__particle" style="left: 90%; animation-delay: 8s;">üç©</div>
        </div>
        <div class="order__container">
            <div class="order__hero">
                <h1 class="order__hero-title">Confirm Your Order</h1>
                <div class="order__border"></div>
                <p class="order__hero-text">Review your cart and provide delivery details to enjoy your delicious meal!
                </p>
            </div>
            <div class="order__progress">
                <div class="order__progress-step order__progress-step--active">
                    <span>Cart Review</span>
                    <div class="order__progress-bar">
                        <div class="order__progress-fill"></div>
                    </div>
                </div>
                <div class="order__progress-step order__progress-step--active">
                    <span>Delivery Details</span>
                    <div class="order__progress-bar">
                        <div class="order__progress-fill"></div>
                    </div>
                </div>
                <div class="order__progress-step">
                    <span>Order Confirmation</span>
                    <div class="order__progress-bar">
                        <div class="order__progress-fill"></div>
                    </div>
                </div>
            </div>
            <table class="order__table" id="order-items-table">
                <tr>
                    <th>S.N.</th>
                    <th>Food</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td colspan="7" class="text-center">Your cart is empty. <a href="index.html">Continue shopping</a>
                    </td>
                </tr>
                <tr>
                    <th colspan="5">Total</th>
                    <th id="order-total">$0.00</th>
                    <th></th>
                </tr>
            </table>
            <form class="order__form" id="orderForm">
                <fieldset>
                    <legend>Delivery Details</legend>
                    <label class="order__form-label">Full Name</label>
                    <input type="text" class="order__form-input" placeholder="Enter your name..." name="fullname"
                        required>
                    <label class="order__form-label">Phone Number</label>
                    <input type="tel" class="order__form-input" id="phone" name="phone"
                        placeholder="Enter your phone..." maxlength="10" pattern="\d{10}" required>
                    <label class="order__form-label">Email</label>
                    <input type="email" class="order__form-input" placeholder="Enter your email..." name="email"
                        required>
                    <label class="order__form-label">Address</label>
                    <input type="text" class="order__form-input" placeholder="Enter your address..." name="address"
                        required>
                    <input type="submit" value="Confirm Order" class="order__form-submit">
                </fieldset>
            </form>
            <p class="order__confirmation" id="confirmationMessage">‚úÖ Your order has been placed successfully!</p>

        </div>
    </section>
    <!-- Order Section End -->

    <!-- Footer Section Start -->
    <section class="footer">
        <div class="container">
            <div class="grid-3">
                <div class="aboutus-flex">
                    <img src="img/footerimage.png" alt="Logo" class="footer-logo" />
                    <div class="about-content">
                        <p>Food Fusion connects customers with local food centers, providing a seamless and delightful
                            dining experience.</p>
                        <p>Our shared passion for food and community drives us to bring quality meals directly to your
                            doorstep.</p>
                    </div>
                </div>
                <div class="FoodFusion">
                    <h3>Food Fusion</h3>
                    <div class="foodfusion">
                        <a href="WhoWeAre.html">Who We Are</a>
                        <a href="Blog.html">Blog</a>
                        <a href="WorkWithus.html">Work With Us</a>
                        <a href="contact.html">Contact Us</a>
                        <a href="ReportFraud.html">Report Fraud</a>
                    </div>
                </div>
                <div>
                    <h3>Learn More</h3>
                    <div class="learnmore">
                        <a href="privacy-policy.html">Privacy Policy</a>
                        <a href="security.html">Security</a>
                        <a href="#">Terms of Service</a>
                        <a href="/lodge-complaint.html">Lodge Complaint</a>
                        <a href="#">Testimonials</a>
                    </div>
                </div>
                <div class="FollowUs">
                    <h3>Social Links</h3>
                    <div class="social">
                        <ul>
                            <li><a href="https://www.facebook.com/"><img src="/img/footer-icons/facebook.svg"
                                        alt="Facebook icon" width="24" height="24"> Facebook</a></li>
                            <li><a href="https://www.instagram.com/"><img src="/img/footer-icons/instagram.svg"
                                        alt="Instagram icon" width="24" height="24"> Instagram</a></li>
                            <li><a href="https://x.com/"><img src="/img/footer-icons/x-twitter.svg" alt="Twitter icon"
                                        width="24" height="24"> Twitter</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Footer Section End -->

    <!-- Copyright Section Start -->
    <section class="copyright">
        <div class="container text-center">
            <p>All rights reserved. Design By <a href="#">Rutika‚ù§Ô∏è</a></p>
        </div>
        <a id="back-to-top" class="order__back-to-top">
            <i class="fa fa-angle-double-up"></i>
        </a>
    </section>
    <!-- Copyright Section End -->

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
    <!-- Custom JS -->
    <script>
        $(document).ready(function () {
            // Load cart items into order table
            loadCartItems();

            // Handle delete button clicks
            $(document).on("click", ".btn-delete", function (event) {
                event.preventDefault();

                const indexToDelete = $(this).data("index"); // Read the index from the button
                let cart = JSON.parse(localStorage.getItem('foodFusionCart')) || [];

                // Add shake animation
                const $row = $(this).closest("tr");
                $row.addClass("order__table-row--removing");

                setTimeout(() => {
                    if (indexToDelete >= 0 && indexToDelete < cart.length) {
                        cart.splice(indexToDelete, 1); // Remove the exact item by index
                        localStorage.setItem('foodFusionCart', JSON.stringify(cart));
                        playSound('remove');
                        loadCartItems(); // Refresh table
                        updateCartBadge(); // Update cart count
                    }
                }, 300);
            });

            // Phone validation
            $("#phone").on("input", function () {
                this.value = this.value.replace(/\D/g, "");
            });

            // Form submission
            $("#orderForm").on("submit", function (e) {
                e.preventDefault();
                const cart = JSON.parse(localStorage.getItem('foodFusionCart')) || [];
                if (cart.length === 0) {
                    alert("Your cart is empty. Please add items before confirming.");
                    return;
                }
                $(".order__progress-step:last").addClass("order__progress-step--active");
                $("#confirmationMessage").fadeIn();
                this.reset();
                localStorage.removeItem('foodFusionCart');
                loadCartItems();
                updateCartBadge();
            });

            // Scroll-Triggered Animations
            const elements = $('.order__table, .order__form');
            function checkVisibility() {
                elements.each(function () {
                    const top = $(this).offset().top - $(window).height() * 0.8;
                    if ($(window).scrollTop() > top) {
                        $(this).addClass('order__card--visible');
                    }
                });
            }

            checkVisibility();
            $(window).scroll(checkVisibility);

            // Back to Top Button
            $('.order__back-to-top').click(function () {
                $('html, body').animate({ scrollTop: 0 }, 600);
                return false;
            });

            // Load cart items into the table
            function loadCartItems() {
                const cart = JSON.parse(localStorage.getItem('foodFusionCart')) || [];
                console.log("Loading cart items:", cart);
                $("#order-items-table tr:not(:first-child):not(:last-child)").remove();

                if (cart.length > 0) {
                    let total = 0;
                    cart.forEach((item, index) => {
                        const itemTotal = parseFloat(item.total) || 0;
                        total += itemTotal;

                        const newRow = `
                    <tr>
                        <td>${index + 1}</td>
                        <td><img src="${item.image || 'img/default.jpg'}" alt="Food"></td>
                        <td>${item.name}</td>
                        <td>$${item.price}</td>
                        <td>${item.quantity}</td>
                        <td>$${itemTotal.toFixed(2)}</td>
                        <td><a href="#" class="btn-delete" data-index="${index}">&times;</a></td>
                    </tr>
                `;
                        $("#order-items-table tr:last").before(newRow);
                    });
                    $("#order-total").text("$" + total.toFixed(2));
                } else {
                    $("#order-items-table tr:last").before(`
                <tr>
                    <td colspan="7" class="text-center">Your cart is empty. <a href="index.html">Continue shopping</a></td>
                </tr>
            `);
                    $("#order-total").text("$0.00");
                }
            }

            function updateCartBadge() {
                const cart = JSON.parse(localStorage.getItem('foodFusionCart')) || [];
                let count = 0;
                cart.forEach(item => {
                    count += parseInt(item.quantity) || 0;
                });
                console.log("Updating badge with count:", count);
                $(".badge").text(count);
            }

            function playSound(action) {
                if (typeof cartSound !== 'undefined' && cartSound) {
                    if (action === 'add') {
                        cartSound.play();
                    } else if (action === 'remove') {
                        // Add remove sound here if needed
                    }
                }
            }
        });
    </script>

    <script src="js/cart-sound.js"></script>
    <script src="js/custom.js"></script>
    <script src="chatbot.js"></script>

</body>

</html>